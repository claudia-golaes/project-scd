{% extends "base_page_template.html" %}

{% block title %}Lista Animale pentru Adop»õie{% endblock %}

{% block content %}
{% if 'admin' in user_roles %}
<a href="{% url 'add_animal' %}">
    + Add Animal
</a>
{% endif %}
<div class="animal-container">
    <h1>Our dogs</h1>

    {% if not animals %}
    <p>No animals</p>
    {% else %}

    <div class="animal-grid" style="display: flex; flex-wrap: wrap; gap: 20px;">
        {% for animal in animals %}
        <div class="animal-card" style="border: 1px solid #ddd; padding: 15px; width: 300px; border-radius: 8px;">

            {% if animal.image %}
            <img src="{{ animal.image.url }}" alt="{{ animal.name }}"
                style="width: 100%; height: 200px; object-fit: cover; border-radius: 4px;">
            {% else %}
            <div
                style="width: 100%; height: 200px; background-color: #eee; display: flex; align-items: center; justify-content: center;">
                <span>No photo</span>
            </div>
            {% endif %}

            <h2>{{ animal.name }}</h2>


            <p><strong>Breed:</strong> {{ animal.breed }}</p>
            <p><strong>Age:</strong> {{ animal.age }}</p>
            <p><strong>Size:</strong> {{ animal.get_size_display }}</p>
            <p><strong>Story:</strong> <br> {{ animal.story|truncatewords:20 }}</p>

            <p>
            <p>
                <strong>Status:</strong>
                <span class="status-{{ animal.status }}">
                    {{ animal.get_status_display }}
                </span>
            </p>
            </p>

            <form action="{% url 'toggle_favorite' animal.id %}" method="POST" style="display: inline;">
                {% csrf_token %}
                {% if 'client' in user_roles %}
                {% if user in animal.favorites.all %}
                <button type="submit" title="remove_from_favorites"
                    style="background: none; border: none; font-size: 24px; cursor: pointer; color: red;">
                    ‚ù§Ô∏è
                </button>
                {% else %}
                <button type="submit" title="add_to_favorites"
                    style="background: none; border: none; font-size: 24px; cursor: pointer; color: grey;">
                    ü§ç
                </button>
                {% endif %}
                {% endif %}
            </form>
            <div>
                <a href="{% url 'animal_info' animal.id %}">
                    See Animal
                </a>
            </div>

        </div>
        {% endfor %}
    </div>

    {% endif %}
</div>
{% endblock %}